<mvc:View
  controllerName="sapify.controller.Dashboard"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:f="sap.f"
  xmlns:l="sap.ui.layout"
  xmlns:core="sap.ui.core"
  xmlns:viz="sap.viz.ui5.controls"
  xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
  xmlns:viz.data="sap.viz.ui5.data"
  displayBlock="true"
  height="100%"
>
  <Page
    title="{i18n>dashboardTitle}"
    class="sapUiResponsiveContentPadding"
    showNavButton="true"
    navButtonPress="onNavBack"
  >
    <content>
      <f:FlexibleColumnLayout
        id="fcl"
        backgroundDesign="Transparent"
        stateChange=".onStateChange"
        layout="{/layout}"
      >
        <f:beginColumn>
          <Panel
            headerText="{i18n>salesOverview}"
            class="sapUiResponsiveMargin"
            width="auto"
          >
            <l:VerticalLayout width="100%">
              <Title text="{i18n>salesPerformance}" titleStyle="H3" />
              <viz:VizFrame
                id="salesChart"
                vizType="column"
                width="100%"
                height="300px"
              />
            </l:VerticalLayout>
          </Panel>
          
          <Panel
            headerText="{i18n>inventoryOverview}"
            class="sapUiResponsiveMargin"
            width="auto"
          >
            <l:VerticalLayout width="100%">
              <Title text="{i18n>lowStockProducts}" titleStyle="H3" />
              <List
                items="{path: '/lowStockProducts', sorter: {path: 'stock'}}"
                growing="true"
                growingThreshold="10"
              >
                <items>
                  <StandardListItem
                    title="{name}"
                    description="{i18n>stock}: {stock}"
                    icon="sap-icon://error"
                    type="Active"
                    press="onProductPress"
                  />
                </items>
              </List>
            </l:VerticalLayout>
          </Panel>
        </f:beginColumn>
        
        <f:midColumn>
          <Panel
            headerText="{i18n>topProducts}"
            class="sapUiResponsiveMargin"
            width="auto"
          >
            <l:VerticalLayout width="100%">
              <viz:VizFrame
                id="topProductsChart"
                vizType="pie"
                width="100%"
                height="300px"
              />
            </l:VerticalLayout>
          </Panel>
        </f:midColumn>
      </f:FlexibleColumnLayout>
    </content>
  </Page>
</mvc:View>